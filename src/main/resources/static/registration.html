<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:100,200,300,400,500,600,700,800,900" rel="stylesheet">

    <title>EduWell - Education HTML5 Template</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="assets/css/fontawesome.css">
    <link rel="stylesheet" href="assets/css/templatemo-eduwell-style.css">
    <link rel="stylesheet" href="assets/css/owl.css">
    <link rel="stylesheet" href="assets/css/lightbox.css">
    <link rel="stylesheet" href="assets/css/programaEstudio.css">
    <link rel="stylesheet" href="fontello.css">
<!--

TemplateMo 573 EduWell

https://templatemo.com/tm-573-eduwell

-->
  </head>

<body>


  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
      <div class="container">
          <div class="row">
              <div class="col-12">
                <nav class="main-nav">
                  <!-- ***** Logo Start ***** -->
                  <a href="index.html" class="logo">
                      <img src="assets/images/logoSeñorCaridad.png" style="max-width: 50px; height: auto;" alt="EduWell Template">
                  </a>
                  <!-- ***** Logo End ***** -->
                  <!-- ***** Menu Start ***** -->
                  <ul class="nav">
                    <li><a href="index.html" class="active">Inicio</a></li>
                    <li><a href="index.html">Servicios</a></li>
                    <li><a href="index.html">Programas de estudio</a></li>
                    <li class="has-sub">
                        <a href="javascript:void(0)">Páginas</a>
                        <ul class="sub-menu">
                            <li><a href="about-us.html">Sobre Nosotros</a></li>
                            <li><a href="our-services.html">Nuestros Servicios</a></li>
                            <li><a href="contact-us.html">Contáctanos</a></li>
                        </ul>
                    </li>
              
                  </ul>      
                  <a class='menu-trigger'>
                      <span>Menu</span>
                  </a>
                  <!-- ***** Menu End ***** -->
                </nav>
              </div>
          </div>
      </div>
  </header>

  <section class="contact-us">
    <div class="container">
      <div class="row">
        <div class="col-lg-8">
          <div id="map">
          	<!-- You just need to go to Google Maps for your own map point, and copy the embed code from Share -> Embed a map section -->
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3915.404285697872!2d-77.59896692420163!3d-11.08321652471115!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9107207785a13ee5%3A0x2f8d0a84f391f008!2sAv.%20Peralvillo%202692%2C%20Santa%20Mar%C3%ADa%2015138!5e0!3m2!1ses-419!2spe!4v1758332097666!5m2!1ses-419!2spe" width="100%" height="420px" frameborder="0" style="border:0; border-radius: 15px; position: relative; z-index: 2;" allowfullscreen=""></iframe>
            <div class="row">
              <div class="col-lg-4 offset-lg-1">
                <div class="contact-info">
                  <div class="icon">
                    <i class="fa fa-phone"></i>
                  </div>
                  <h4>Telefono</h4>
                  <span>984 476 594</span>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="contact-info">
                  <div class="icon">
                    <li><a href="https://www.facebook.com/profile.php?id=100041500634427&rdid=6Zp5LpO4wrw22yg7&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1H4mYTPUXv%2F#"><i class="fa fa-facebook"></i></a></li>
                  </div>
                  <h4>FACEBOOK</h4>
                  <span>Cetpro Parroquial Señorde la Caridad </span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4">
          <form id="contact" action="" method="post">
            <div class="row">
              <div class="col-lg-12">
                <div class="section-heading">
                  <h6>Registrate</h6>
                  <h4>en <em id="nombrePrograma">PROGRAMA DE ESTUDIO</em></h4>
                  <p>Tu futuro empieza aquí. Completa tu registro y despega hacia nuevas metas.</p>
                </div>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <input type="text" name="name" id="apellidosNombres" placeholder="Apellidos y nombres*" autocomplete="on" required>
                </fieldset>
              </div>

              <div class="col-lg-12">
                <fieldset>
                  <input name="dni" id="dni" placeholder="Dni ">
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <input type="number" name="edad" id="edad" placeholder="Edad*" autocomplete="on" required>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <input name="direccion" id="direccion" placeholder="Dirección ">
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <input name="telefono" id="telefono" placeholder="Telefono*" required>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <input type="text" name="email" id="correo" pattern="[^ @]*@[^ @]*" placeholder="Correo*" required="">
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <input name="especialidad" id="especialidad" placeholder="Especialidad*" readonly>
                </fieldset>
              </div>
              <div class="col-lg-12">
                <fieldset>
                  <select class="col-lg-12" name="turno" id="turno" required>
                    <option class="col-lg-12" value="" disabled selected>Elige un turno*</option>
                    <option value="mañana">Mañana de 8:30 am a 1:00 pm</option>
                    <option value="tarde">Tarde de 2:00 pm a 6:30 pm </option>
                    <option value="noche">Noche de 6:30 pm a 11:00 pm</option>
                  </select>
                </fieldset>
              </div>
              <div id="mensaje" style="color: green; margin-top: 10px;"></div>
              <div class="col-lg-12">
                <fieldset>
                  <button type="submit" id="form-submit" class="main-gradient-button">Registrar</button>
                </fieldset>
              </div>
            </div>
          </form>
        </div>
      
        <div class="col-lg-12">
          <p class="copyright">Copyright © 2025 
          <br>Creado por: <a rel="sponsored" target="_blank"> Alumnos de M(a). Wendy Salinas Rojas</a></p>
        </div>
      </div>
    </div>
  </section>
  <a href="https://wa.me/51984476594" class="btn-wsp" target="_blank">
    <i class="fa fa-whatsapp icono"></i>
  </a>
  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <script src="assets/js/isotope.min.js"></script>
    <script src="assets/js/owl-carousel.js"></script>
    <script src="assets/js/lightbox.js"></script>
    <script src="assets/js/tabs.js"></script>
    <script src="assets/js/video.js"></script>
    <script src="assets/js/slick-slider.js"></script>
    <script src="assets/js/custom.js"></script>
    <script>
        //according to loftblog tut
        $('.nav li:first').addClass('active');

        var showSection = function showSection(section, isAnimate) {
          var
          direction = section.replace(/#/, ''),
          reqSection = $('.section').filter('[data-section="' + direction + '"]'),
          reqSectionPos = reqSection.offset().top - 0;

          if (isAnimate) {
            $('body, html').animate({
              scrollTop: reqSectionPos },
            800);
          } else {
            $('body, html').scrollTop(reqSectionPos);
          }

        };

        var checkSection = function checkSection() {
          $('.section').each(function () {
            var
            $this = $(this),
            topEdge = $this.offset().top - 80,
            bottomEdge = topEdge + $this.height(),
            wScroll = $(window).scrollTop();
            if (topEdge < wScroll && bottomEdge > wScroll) {
              var
              currentId = $this.data('section'),
              reqLink = $('a').filter('[href*=\\#' + currentId + ']');
              reqLink.closest('li').addClass('active').
              siblings().removeClass('active');
            }
          });
        };

        $('.main-menu, .responsive-menu, .scroll-to-section').on('click', 'a', function (e) {
          e.preventDefault();
          showSection($(this).attr('href'), true);
        });

        $(window).scroll(function () {
          checkSection();
        });
        
        // LLamando a la API de registrar
      document.getElementById("form-submit").addEventListener("click", async (event) => {
      event.preventDefault(); // Evita que el formulario recargue la página

      // Obtener valores del formulario
      const data = {
        apellidosNombres: document.getElementById("apellidosNombres").value,
        dni: document.getElementById("dni").value,
        edad: document.getElementById("edad").value,
        direccion: document.getElementById("direccion").value,
        telefono: document.getElementById("telefono").value,
        correo: document.getElementById("correo").value,
        especialidad: document.getElementById("especialidad").value,
        turno: document.getElementById("turno").value
      };

      try {
        //const response = await fetch("http://localhost:8080/registrar", {
        const response = await fetch("https://proyectocetpro-production.up.railway.app/registrar", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });
        const responseEnviarWhtasapp = await fetch("https://proyectocetpro-production.up.railway.app/enviarWhatsapp", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(data)
        });

        if (response.ok) {
          const result = await response.json();
          document.getElementById("mensaje").innerText = "✅ Registro exitoso";

          console.log("Respuesta del servidor:", result);
          // 🔄 Redirigir después de 1 segundo
          setTimeout(() => {
            window.location.href = "index.html";
          }, 1000);
            } else {
              document.getElementById("mensaje").innerText = "❌ Error al registrar, complete los datos obligatorios";
            }
          
          } catch (error) {
            console.error("Error en la petición:", error);
            document.getElementById("mensaje").innerText = "⚠️ No se pudo conectar con el servidor";
          }
        });


        // Recuperar de localStorage al cargar la página
        document.addEventListener("DOMContentLoaded", () => {
        const especialidad = localStorage.getItem("especialidadSeleccionada");
        console.log("Activo guardado:", especialidad);

        if (especialidad) {
          // 1. Poner en input hidden
          const input = document.getElementById("especialidad");
          if (input) input.value = especialidad;

          // 2. Mostrar en tu h4
          const nombrePrograma = document.getElementById("nombrePrograma");
          if (nombrePrograma) nombrePrograma.textContent = especialidad;

          // 3. (Opcional) Marcar el div correcto en el menú
          document.querySelectorAll(".menu .gradient-border").forEach(el => {
            if (el.textContent.trim() === especialidad) {
              el.classList.add("active");
            } else {
              el.classList.remove("active");
            }
          });
        }
      });
  
    </script>

</body>
</html>